<link rel="stylesheet" href="../assets/style.css">
<div style="padding:18px">
  <h3 style="margin:0 0 12px 0">Network</h3>
  <div class="tool">
   <body>
  <main class="container">
    <section class="card">
      <h1>Chọn tuyến mạng</h1>
      <div class="row">
        <label for="netSelect">Điểm POP / Region</label>
        <select id="netSelect" aria-label="Chọn tuyến mạng">
          <option value="" disabled selected>— Chọn —</option>
          <option value="NET-HCM">NET-HCM</option>
          <option value="NET-HN">NET-HN</option>
          <option value="NET-NT">NET-NT</option>
        </select>
      </div>
      <p class="muted">Khi bạn chọn một mục, trang tương ứng sẽ được mở ngay.</p>
    </section>
  </main>

  <script>
    const ROUTES = {
      "NET-HCM": "pages/net/net-hcm.html",
      "NET-HN" : "pages/net/net-hn.html",
      "NET-NT" : "pages/net/net-nt.html"
    };

    const sel = document.getElementById("netSelect");
    sel.addEventListener("change", (e) => {
      const key = e.target.value;
      const url = ROUTES[key];
      if (url) {
        window.location.href = url;
      }
    });
  </script>
</body>

  </div>
</div>
<script>
const ipv4re = /^(?:\d{1,3}\.){3}\d{1,3}$/;
const ipv6re = /^[0-9a-f:]+$/i;
function fetchWithTimeout(u, ms=1500, parse='text'){
  const controller = new AbortController();
  const timer = setTimeout(()=>controller.abort(), ms);
  return fetch(u, { cache: 'no-store', signal: controller.signal })
    .then(r=>{ if(!r.ok) throw new Error('HTTP '+r.status); return parse==='json' ? r.json() : r.text(); })
    .finally(()=> clearTimeout(timer));
}
async function fetchJSON(u){ return await fetchWithTimeout(u, 1500, 'json'); }
async function fetchTEXT(u){ return await fetchWithTimeout(u, 1500, 'text'); }
async function tryAll(tasks){ for (const t of tasks){ try{ const v = await t(); if (v) return v; }catch{} } return ''; }
async function getIPv4(){ return await tryAll([
  async()=>{ const j = await fetchJSON('https://api.ipify.org?format=json'); return ipv4re.test(j.ip)? j.ip : ''; },
  async()=>{ const j = await fetchJSON('https://api4.ipify.org?format=json'); return ipv4re.test(j.ip)? j.ip : ''; },
  async()=>{ const v = (await fetchTEXT('https://ifconfig.me/ip')).trim(); return ipv4re.test(v)? v : ''; },
]);}
async function getIPv6(){ return await tryAll([
  async()=>{ const j = await fetchJSON('https://api64.ipify.org?format=json'); return ipv6re.test(j.ip)? j.ip : ''; },
  async()=>{ const v = (await fetchTEXT('https://ipv6.icanhazip.com/')).trim(); return ipv6re.test(v)? v : ''; },
]);}
(async function init(){
  const el = document.getElementById('publicIp');
  el.textContent = 'Đang lấy…';
  try{
    const [v4, v6] = await Promise.all([getIPv4(), getIPv6()]);
    el.textContent = v4 || v6 || '—';
  }catch{ el.textContent = '⚠️ Lỗi lấy IP'; }
})();
</script>